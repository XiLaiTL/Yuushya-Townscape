tasks.register('generateAssetsAndData', CreateAssetsAndDataTask){
    dependsOn(processResources)
    it.path = projectDir.toPath().resolve("./build/resources/main/")
    //onlyIf { !processResources.state.upToDate }
    doLast {
        println 'Assets and Data Build Success'
    }
}

tasks.register('checkImageSize', CheckImageSizeTask){
    it.path = projectDir.toPath().resolve("./src/main/resources/")
}

def versions = ['1.16.5', '1.18.2', '1.19.2', '1.19.4', '1.20.1', '1.20.4','1.20.6']

tasks.register('copyResources') {
    dependsOn(versions.collect {"copyResources-${it}"})
}

versions.forEach {ver->
    tasks.register("copyResources-${ver}",Copy){
        dependsOn(processResources)
        from("./build/resources/main/")
        into("../${ver}/common/build/resources/main/")
        duplicatesStrategy = DuplicatesStrategy.INHERIT
    }

}

